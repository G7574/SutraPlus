<!-- <p>email-config works!</p> -->

<ngx-spinner type="ball-scale-multiple"></ngx-spinner>
<c-row>
    <c-col md="12">
        <div class="bg-light d-flex flex-row justify-content-end align-items-center">
            <button cButton class="px-0 text-dark fw-bold text-decoration-none" color="link"
                (click)="back()">
                <svg cIcon name="cilChevronLeft"></svg> Back
            </button>
        </div>
    </c-col>
</c-row>

<c-row>
    <c-col md="12">
        <c-card class="my-3">
            <c-card-header class="fw-bold">Email Configuration</c-card-header>
            <form class="px-2 add-form" [formGroup]="emailConfig">
                <c-card-body class="p-3">

                    <c-row class="mb-3">
                        <label cLabel="col" class="text-end" cCol [sm]="2">
                            From Email
                        </label>
                        <c-col [sm]="4">
                            <input formControlName="fromEmail"
                                [ngClass]="{ 'is-invalid': submitted && emailConfig.controls['fromEmail'].errors }"
                                cFormControl type="email" placeholder="Enter From Email" />
                            <div *ngIf="submitted && emailConfig.controls['fromEmail'].errors"
                                class="invalid-feedback fw-semibold">
                                <div *ngIf="emailConfig.controls['fromEmail'].errors['required']">
                                    Enter From Email</div>
                                <div *ngIf="emailConfig.controls['fromEmail'].errors['pattern']">
                                    Email is not valid</div>
                            </div>
                        </c-col>

                        <!-- <label cLabel="col" class="text-end" cCol [sm]="2">
                            Password
                        </label>
                        <c-col [sm]="4">
                            <input formControlName="password"
                                [ngClass]="{ 'is-invalid': submitted && emailConfig.controls['password'].errors }"
                                cFormControl type="password" placeholder="Enter Password" />
                            <div *ngIf="submitted && emailConfig.controls['password'].errors"
                                class="invalid-feedback fw-semibold">
                                <div *ngIf="emailConfig.controls['password'].errors['required']">
                                    Enter Password</div>
                            </div>
                        </c-col> -->

                        <label cLabel="col" class="text-end" cCol [sm]="2">
                            Password
                        </label>
                        <c-col [sm]="4">
                            <div class="input-group">
                                <input formControlName="password"
                                    [ngClass]="{ 'is-invalid': submitted && emailConfig.controls['password'].errors }"
                                    cFormControl [type]="hidePassword ? 'password' : 'text'"
                                    placeholder="Enter Password" />
                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary" type="button"
                                        (click)="hidePassword = !hidePassword">
                                        <i
                                            class="{{hidePassword ? 'fa fa-eye-slash' : 'fa fa-eye'}}"></i>
                                    </button>
                                </div>
                                <div *ngIf="submitted && emailConfig.controls['password'].errors"
                                    class="invalid-feedback fw-semibold">
                                    <div
                                        *ngIf="emailConfig.controls['password'].errors['required']">
                                        Enter Password</div>
                                </div>
                            </div>
                        </c-col>

                    </c-row>

                    <c-row class="mb-3">
                        <label cLabel="col" class="text-end" cCol [sm]="2">
                            Email Server Host
                        </label>
                        <c-col [sm]="4">
                            <input formControlName="emailServerHost"
                                [ngClass]="{ 'is-invalid': submitted && emailConfig.controls['emailServerHost'].errors }"
                                cFormControl type="text" placeholder="Enter Email Server Host" />
                            <div *ngIf="submitted && emailConfig.controls['emailServerHost'].errors"
                                class="invalid-feedback fw-semibold">
                                <div
                                    *ngIf="emailConfig.controls['emailServerHost'].errors['required']">
                                    Enter Email Server Host</div>
                            </div>
                        </c-col>

                        <label cLabel="col" class="text-end" cCol [sm]="2">
                            Email Server Port
                        </label>
                        <c-col [sm]="4">
                            <input formControlName="emailServerPort"
                                [ngClass]="{ 'is-invalid': submitted && emailConfig.controls['emailServerPort'].errors }"
                                cFormControl type="number" placeholder="Enter Email Server Port" />
                            <div *ngIf="submitted && emailConfig.controls['emailServerPort'].errors"
                                class="invalid-feedback fw-semibold">
                                <div
                                    *ngIf="emailConfig.controls['emailServerPort'].errors['required']">
                                    Enter Email Server Port</div>
                            </div>
                        </c-col>
                    </c-row>
                </c-card-body>
            </form>
            <hr>
            <!-- *ngIf="!accessModuleEnabled" -->
            <c-row class="px-3 mb-2">
                <c-col [sm]="12" class="d-flex justify-content-between">
                    <button (click)="reset()" class="btn btn-outline-dark me-2 px-3"
                        type="reset">Reset</button>
                    <button (click)="onSubmit()" cButton
                        class="btn btn-dark ms-2 px-3">Save</button>
                </c-col>
            </c-row>
        </c-card>
    </c-col>
</c-row>